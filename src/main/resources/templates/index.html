<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recommended Universities</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/litepicker/dist/css/litepicker.css"/>

    <style>
        body { font-family: Arial, sans-serif; }
        #results ul { list-style-type: none; padding: 0; }
        #results li { margin: 20px 0; }
    </style>
</head>
<body>
<h1>대학 추천 사이트</h1>
<form id="searchForm">
    <label for="country">Desired Country:</label>
    <select id="country" name="country" required>
        <option value="China">China</option>
        <option value="Japan">Japan</option>
        <option value="Taiwan">Taiwan</option>
    </select>

    <label for="period">Desired Period:</label>
    <select id="period" name="period" required>
        <option value="Semester">1 Semester</option>
        <option value="Year">1 Year</option>
    </select>

    <label for="dormitory">Dormitory:</label>
    <input type="checkbox" id="dormitory" name="dormitory" value="Yes"> Yes

    <button type="submit">Search</button>
</form>

<div id="results">
    <h3>Search Results</h3>
    <ul id="results-list"></ul>
</div>

<script src="https://cdn.jsdelivr.net/npm/litepicker/dist/litepicker.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function() {
        $('#searchForm').on('submit', function(event) {
            event.preventDefault();

            const data = {
                country: $('#country').val(),
                period: $('#period').val(),
                dormitory: $('#dormitory').is(':checked') ? 'Yes' : 'No'
            };

            $.ajax({
                url: '/api/search',
                type: 'POST',
                contentType: 'application/json',
                data: JSON.stringify(data),
                success: function(response) {
                    $('#results-list').empty();
                    if (response.length === 0) {
                        $('#results-list').append('<li>No universities found</li>');
                    } else {
                        response.forEach(function(university) {
                            $('#results-list').append(
                                '<li>' +
                                '<h4>' + university.name + '</h4>' +
                                '<p><strong>Location:</strong> ' + university.country + '</p>' +
                                '<p><strong>Dormitory Available:</strong> ' + university.dormitory + '</p>' +
                                '<p><strong>Period:</strong> ' + university.period + '</p>' +
                                '</li>'
                            );
                        });
                    }
                },
                error: function(error) {
                    console.error('Error:', error);
                    $('#results-list').append('<li>An error occurred</li>');
                }
            });
        });
    });
</script>
</body>
</html>
